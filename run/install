#!/usr/bin/env bash

rm -rf "./autogenerated/package.vsix" 2>/dev/null
mkdir -p "./autogenerated"
npx vsce package --out "./autogenerated/package.vsix" && echo "packaged VSCE"
# if code exists
if [ -n "$(command -v "code")" ]
then
    code --install-extension "./autogenerated/package.vsix" && echo "installed package"
# if sys exists (xome)
elif [ -n "$(command -v "sys")" ] 
then
    sys code --install-extension "./autogenerated/package.vsix" && echo "installed package"
else
    echo "no code or sys command, package generated but not installed"
fi